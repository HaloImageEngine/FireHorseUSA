<section class="media">
	<h2>Upload an Image</h2>
	<p class="hint">Use your phone camera or gallery to select a photo and send it to the server.
		<span *ngIf="isLoggedIn">(User: {{ userAlias }} - ID: {{ userId }} - Device: {{ deviceType }})</span>
		<span *ngIf="!isLoggedIn">(Not Logged In - Device: {{ deviceType }})</span>
	</p>

	<div class="media__picker" *ngIf="isLoggedIn">
		<label class="media__file-label" for="imageInput">
			Choose or take a picture
		</label>
		<input
			id="imageInput"
			type="file"
			accept="image/*"
			capture="environment"
			(change)="onFileSelected($event)"
		/>
	</div>

	<div class="media__preview" *ngIf="previewUrl as url">
		<h3>{{ showingReview ? 'Last Uploaded Image' : 'Preview' }}</h3>
		<img [src]="url" alt="Selected image preview" />
		<button
			type="button"
			class="close-review-btn"
			*ngIf="showingReview"
			(click)="closeReview()"
		>
			Close Review
		</button>
	</div>

	<div class="media__actions" *ngIf="isLoggedIn">
		<button
			type="button"
			(click)="uploadImage()"
			[disabled]="!selectedFile || isUploading || showingReview"
		>
			{{ isUploading ? 'Uploadingâ€¦' : 'Upload Image' }}
		</button>

		<button
			type="button"
			class="review-btn"
			*ngIf="lastUploadedImage && !showingReview && !previewUrl"
			(click)="reviewLastImage()"
		>
			Review Last Upload
		</button>
	</div>

	<p class="status" *ngIf="statusMessage">{{ statusMessage }}</p>
</section>
